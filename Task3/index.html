<!DOCTYPE html>
<html>
<head>
  <title>Book Manager</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      padding: 20px;
      margin: 0;
      background: #f1f5f9; /* Soft pastel gray-blue background */
    }
    h1 {
      text-align: center;
      margin-bottom: 30px;
      color: #444;
    }
    .container {
      display: flex;
      gap: 25px;
      justify-content: center;
      flex-wrap: wrap;
    }
    .card {
      background: #ffffffcc;
      backdrop-filter: blur(10px);
      padding: 25px;
      border-radius: 15px;
      width: 400px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease;
    }
    .card:hover {
      transform: translateY(-5px);
    }
    .card h2 {
      text-align: center;
      margin-bottom: 20px;
      color: #6a4c93;
    }
    input {
      width: 95%;
      padding: 10px;
      margin: 8px 0;
      border-radius: 8px;
      border: 1px solid #ddd;
      font-size: 14px;
    }
    input:focus {
      outline: none;
      border-color: #a6c1ee;
      box-shadow: 0 0 5px #a6c1ee;
    }
    button {
      padding: 8px 12px;  
      cursor: pointer;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      transition: 0.3s;
    }
    .add-btn {
      background: #a0c4ff;
      color: #333;
      margin-top: 10px;
    }
    .add-btn:hover {
      background: #89b4fa;
    }
    .update-btn {
      background: #ffd6a5;
      color: #333;
      margin-right: 5px;
    }
    .update-btn:hover {
      background: #ffbf69;
    }
    .delete-btn {
      background: #ffadad;
      color: #333;
    }
    .delete-btn:hover {
      background: #ff8fab;
    }
    .book {
      background: #f8edeb;
      padding: 12px;
      margin-bottom: 10px;
      border-radius: 10px;
      font-size: 14px;
    }
    @media (max-width: 900px) {
      .container {
        flex-direction: column;
        align-items: center;
      }
    }
  </style>
</head>
<body>
<h1><strong> Book Manager</strong></h1>
<div class="container">
  <!-- CARD 1 : ADD BOOK -->
  <div class="card">
    <h2>Add Book</h2>
    <form id="bookForm">
      <input type="hidden" id="bookId" />
      <input type="text" id="title" placeholder="Book Title" required />
      <input type="text" id="author" placeholder="Author Name" required />
      <button type="submit" class="add-btn">Save Book</button>
    </form>
  </div>
  <!-- CARD 2 : MANAGE BOOKS -->
  <div class="card">
    <h2>Manage Books</h2>
    <div id="bookList"></div>
  </div>
</div>
<script>
  const API_URL = "http://localhost:3000/books";
  const bookForm = document.getElementById("bookForm");
  const bookList = document.getElementById("bookList");
  const bookIdField = document.getElementById("bookId");
  const titleField = document.getElementById("title");
  const authorField = document.getElementById("author");
  async function fetchBooks() {
    const response = await fetch(API_URL);
    const books = await response.json();
    bookList.innerHTML = "";
    books.forEach(book => {
      const div = document.createElement("div");
      div.className = "book";
      div.innerHTML = `
        <strong>${book.title}</strong> by ${book.author}
        <br/><br/>
        <button class="update-btn" onclick="editBook(${book.id}, '${book.title}', '${book.author}')">Edit</button>
        <button class="delete-btn" onclick="deleteBook(${book.id})">Delete</button>
      `;
      bookList.appendChild(div);
    });
  }
  bookForm.addEventListener("submit", async (e) => {
    e.preventDefault();
    const id = bookIdField.value;
    const title = titleField.value;
    const author = authorField.value;
    if (id) {
      await fetch(`${API_URL}/${id}`, {
        method: "PUT",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ title, author })
      });
    } else {
      await fetch(API_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ title, author })
      });
    }
    bookForm.reset();
    bookIdField.value = "";
    fetchBooks();
  });
  function editBook(id, title, author) {
    bookIdField.value = id;
    titleField.value = title;
    authorField.value = author;
  }
  async function deleteBook(id) {
    await fetch(`${API_URL}/${id}`, {
      method: "DELETE"
    });
    fetchBooks();
  }
  fetchBooks();
</script>
</body>
</html>
